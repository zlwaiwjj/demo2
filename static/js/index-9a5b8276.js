import{t as N}from"./index-17991776.js";import{e as At,l as Mt,m as Ft}from"./index-70a76fbd.js";import{h as H,r as v,a as r,j as $,k as O,u as t,q as g,n as lt,m as Y,A as at,l as h,I as $t,J as Ot,a3 as X,v as Ht,x,D as F,X as Pt,F as jt,b6 as Dt,b4 as qt,C as zt}from"./runtime-core.esm-bundler-1f6332ae.js";import{g as Bt}from"./index-e24b4c59.js";import{_ as Et}from"./_plugin-vue_export-helper-c27b6911.js";import"./vue.runtime.esm-bundler-7c6ab200.js";import"./runtime-dom.esm-bundler-7421a035.js";const Rt=()=>{window.cancelAnimationFrame=(()=>window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(l){return window.clearTimeout(l)})(),window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(l){return window.setTimeout(l,1e3/60)}}()},Wt=(l,d)=>{if(l===d)return!0;if(l.length!==d.length)return!1;for(let a=0;a<l.length;++a)if(l[a]!==d[a])return!1;return!0};function rt(){Array.isArray||(Array.isArray=function(f){return Object.prototype.toString.call(f)==="[object Array]"});let l,d,a,u,m,S,e=1,n=arguments[0]||{},p=!1,_=arguments.length;if(typeof n=="boolean"&&(p=n,n=arguments[1]||{},e++),typeof n!="object"&&typeof n!="function"&&(n={}),e===_)return n;for(;e<_;e++)if((d=arguments[e])!=null)for(l in d)a=n[l],u=d[l],m=Array.isArray(u),p&&u&&(typeof u=="object"||m)?(m?(m=!1,S=a&&Array.isArray(a)?a:[]):S=a&&typeof a=="object"?a:{},n[l]=rt(p,S,u)):u!==void 0&&(n[l]=u);return n}const It=Object.freeze(Object.defineProperty({__proto__:null,animationFrame:Rt,arrayEqual:Wt,copyObj:rt},Symbol.toStringTag,{value:"Module"})),Lt=["innerHTML"],Nt=H({name:"ReSeamlessScroll"}),Yt=H({...Nt,props:{data:{type:Array},classOption:{type:Object}},emits:["scrollEnd"],setup(l,{expose:d,emit:a}){const u=l,{animationFrame:m,copyObj:S}=It;m();const e=v(0),n=v(0),p=v(0),_=v(0),f=v(0),b=v(0),P=v(0),j=v("");let C=null,U=null,D=null,V=null,J=null,q=!1,z="ease-in";const{classOption:w}=u;w.key===void 0&&(w.key=0);const G=N(`wrap${w.key}`,null),K=N(`slotList${w.key}`,null),Q=N(`realBox${w.key}`,null),Z=r(()=>t(e)<0),tt=r(()=>Math.abs(t(e))<t(b)-t(f)),ct=r(()=>({step:1,limitMoveNum:5,hoverStop:!0,direction:"top",openTouch:!0,singleHeight:0,singleWidth:0,waitTime:1e3,switchOffset:30,autoPlay:!0,navigation:!1,switchSingleStep:134,switchDelay:400,switchDisabledClass:"disabled",isSingleRemUnit:!1})),i=r(()=>S({},t(ct),w)),ut=r(()=>t(Z)?"":t(i).switchDisabledClass),ft=r(()=>t(tt)?"":t(i).switchDisabledClass),dt=r(()=>({position:"absolute",margin:`${t(_)/2}px 0 0 -${t(i).switchOffset}px`,transform:"translate(-100%,-50%)"})),pt=r(()=>({position:"absolute",margin:`${t(_)/2}px 0 0 ${t(f)+t(i).switchOffset}px`,transform:"translateY(-50%)"})),B=r(()=>t(i).direction!=="bottom"&&t(i).direction!=="top"),et=r(()=>t(B)?{float:"left",overflow:"hidden"}:{overflow:"hidden"}),mt=r(()=>({transform:`translate(${t(e)}px,${t(n)}px)`,transition:`all ${z} ${t(p)}ms`,overflow:"hidden"})),E=r(()=>t(i).navigation),R=r(()=>t(E)?!1:t(i).autoPlay),nt=r(()=>u.data.length>=t(i).limitMoveNum),ot=r(()=>t(i).hoverStop&&t(R)&&t(nt)),W=r(()=>t(i).openTouch),it=r(()=>t(i).isSingleRemUnit?parseInt(window.getComputedStyle(document.documentElement,null).fontSize):1),I=r(()=>t(i).singleWidth*t(it)),L=r(()=>t(i).singleHeight*t(it)),k=r(()=>{let o;const s=t(i).step;if(t(B)?o=t(I):o=t(L),o>0&&o%s>0)throw"如果设置了单步滚动，step需是单步大小的约数，否则无法保证单步滚动结束的位置是否准确";return s});function ht(){e.value=0,n.value=0,A(),st()}function vt(){if(t(Z)){if(Math.abs(t(e))<t(i).switchSingleStep){e.value=0;return}e.value+=t(i).switchSingleStep}}function wt(){if(t(tt)){if(t(b)-t(f)+t(e)<t(i).switchSingleStep){e.value=t(f)-t(b);return}e.value-=t(i).switchSingleStep}}function A(){cancelAnimationFrame(U||"")}function yt(o){if(!t(W))return;let s;const c=o.targetTouches[0],{waitTime:y,singleHeight:M,singleWidth:Ct}=t(i);D={x:c.pageX,y:c.pageY},V=t(n),J=t(e),M&&Ct?(s&&clearTimeout(s),s=setTimeout(()=>{A()},y+20)):A()}function gt(o){if(!t(W)||o.targetTouches.length>1||o.scale&&o.scale!==1)return;const s=o.targetTouches[0],{direction:c}=t(i),y={x:s.pageX-D.x,y:s.pageY-D.y};o.preventDefault();const M=Math.abs(y.x)<Math.abs(y.y)?1:0;M===1&&c==="bottom"||M===1&&c==="top"?n.value=V+y.y:(M===0&&c==="left"||M===0&&c==="right")&&(e.value=J+y.x)}function St(){if(!t(W))return;let o;const s=t(i).direction;if(p.value=50,s==="top")t(n)>0&&(n.value=0);else if(s==="bottom"){const c=t(P)/2*-1;t(n)<c&&(n.value=c)}else if(s==="left")t(e)>0&&(e.value=0);else if(s==="right"){const c=t(b)*-1;t(e)<c&&(e.value=c)}o&&clearTimeout(o),o=setTimeout(()=>{p.value=0,T()},t(p))}function _t(){t(ot)&&Tt()}function bt(){t(ot)&&kt()}function T(){q||(U=requestAnimationFrame(function(){const o=t(P)/2,s=t(b)/2,{direction:c,waitTime:y}=t(i);c==="top"?(Math.abs(t(n))>=o&&(a("scrollEnd"),n.value=0),n.value-=k.value):c==="bottom"?(t(n)>=0&&(a("scrollEnd"),n.value=o*-1),n.value+=k.value):c==="left"?(Math.abs(t(e))>=s&&(a("scrollEnd"),e.value=0),e.value-=k.value):c==="right"&&(t(e)>=0&&(a("scrollEnd"),e.value=s*-1),e.value+=k.value),C&&clearTimeout(C),t(L)?Math.abs(t(n))%t(L)<t(k)?C=setTimeout(()=>{T()},y):T():t(I)&&Math.abs(t(e))%t(I)<t(k)?C=setTimeout(()=>{T()},y):T()}))}function st(){$t(()=>{const{switchDelay:o}=t(i);if(j.value="",t(B)){_.value=t(G).offsetHeight,f.value=t(G).offsetWidth;let s=t(K).offsetWidth;t(R)&&(s=s*2+1),t(Q).style.width=s+"px",b.value=s}if(t(R))z="ease-in",p.value=0;else{z="linear",p.value=o;return}t(nt)?(j.value=t(K).innerHTML,setTimeout(()=>{var s;P.value=(s=t(Q))==null?void 0:s.offsetHeight,T()},0)):(A(),n.value=e.value=0)})}function kt(){q=!1,T()}function Tt(){q=!0,C&&clearTimeout(C),A()}function xt(o){t(i).direction==="left"||t(i).direction==="right"||Mt(()=>{o.deltaY>0?n.value-=k.value:n.value+=k.value},50)()}return At(()=>{st()}),Ft(()=>{A(),clearTimeout(C)}),d({reset:ht}),(o,s)=>($(),O("div",{ref:"wrap"+t(w).key},[t(E)?($(),O("div",{key:0,style:g(t(dt)),class:lt(t(ut)),onClick:vt},[Y(o.$slots,"left-switch")],6)):at("",!0),t(E)?($(),O("div",{key:1,style:g(t(pt)),class:lt(t(ft)),onClick:wt},[Y(o.$slots,"right-switch")],6)):at("",!0),h("div",{ref:"realBox"+t(w).key,style:g(t(mt)),onMouseenter:_t,onMouseleave:bt,onTouchstartPassive:yt,onTouchmovePassive:gt,onTouchend:St,onMousewheelPassive:xt},[h("div",{ref:"slotList"+t(w).key,style:g(t(et))},[Y(o.$slots,"default")],4),h("div",{innerHTML:j.value,style:g(t(et))},null,12,Lt)],36)],512))}}),Xt=Bt(Yt),Ut=Xt,Vt=l=>(Dt("data-v-a10f88bc"),l=l(),qt(),l),Jt={class:"card-header"},Gt=Vt(()=>h("span",null,"无缝滚动示例",-1)),Kt={class:"item"},Qt=["textContent"],Zt=H({name:"SeamlessScroll"}),te=H({...Zt,setup(l){const d=v(),a=v([{title:"无缝滚动第一行无缝滚动第一行！！！！！！！！！！"},{title:"无缝滚动第二行无缝滚动第二行！！！！！！！！！！"},{title:"无缝滚动第三行无缝滚动第三行！！！！！！！！！！"},{title:"无缝滚动第四行无缝滚动第四行！！！！！！！！！！"},{title:"无缝滚动第五行无缝滚动第五行！！！！！！！！！！"},{title:"无缝滚动第六行无缝滚动第六行！！！！！！！！！！"},{title:"无缝滚动第七行无缝滚动第七行！！！！！！！！！！"},{title:"无缝滚动第八行无缝滚动第八行！！！！！！！！！！"},{title:"无缝滚动第九行无缝滚动第九行！！！！！！！！！！"}]),u=Ot({direction:"top"});function m(S){t(d).reset(),t(u).direction=S}return(S,e)=>{const n=X("el-button"),p=X("el-card"),_=X("el-space");return $(),Ht(_,{wrap:""},{default:x(()=>[F(p,{class:"box-card"},{header:x(()=>[h("div",Jt,[Gt,F(n,{class:"button",link:"",type:"primary",onClick:e[0]||(e[0]=f=>m("top"))},{default:x(()=>[h("span",{style:g({color:u.direction==="top"?"red":""})}," 向上滚动 ",4)]),_:1}),F(n,{class:"button",link:"",type:"primary",onClick:e[1]||(e[1]=f=>m("bottom"))},{default:x(()=>[h("span",{style:g({color:u.direction==="bottom"?"red":""})}," 向下滚动 ",4)]),_:1}),F(n,{class:"button",link:"",type:"primary",onClick:e[2]||(e[2]=f=>m("left"))},{default:x(()=>[h("span",{style:g({color:u.direction==="left"?"red":""})}," 向左滚动 ",4)]),_:1}),F(n,{class:"button",link:"",type:"primary",onClick:e[3]||(e[3]=f=>m("right"))},{default:x(()=>[h("span",{style:g({color:u.direction==="right"?"red":""})}," 向右滚动 ",4)]),_:1})])]),default:x(()=>[F(t(Ut),{ref_key:"scroll",ref:d,data:a.value,"class-option":u,class:"warp"},{default:x(()=>[h("ul",Kt,[($(!0),O(jt,null,Pt(a.value,(f,b)=>($(),O("li",{key:b},[h("span",{class:"title",textContent:zt(f.title)},null,8,Qt)]))),128))])]),_:1},8,["data","class-option"])]),_:1})]),_:1})}}});const re=Et(te,[["__scopeId","data-v-a10f88bc"]]);export{re as default};
